#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo ""
echo "ðŸ”¨ Formatting Solidity code..."

# Run forge fmt
forge fmt

# Check for changes and stage them
if [ -n "$(git diff --name-only *.sol **/*.sol 2>/dev/null)" ]; then
    echo "âœ¨ Code formatted! Adding to commit..."
    git add *.sol **/*.sol 2>/dev/null || true
    echo "âœ… Formatted files staged"
else
    echo "âœ… No formatting needed"
fi

echo ""
