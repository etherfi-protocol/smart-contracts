#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo ""
echo "ğŸ”¨ Running Forge formatter on Solidity files..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Run forge fmt
forge fmt

# Check if formatter made any changes
if ! git diff --quiet *.sol; then
    echo ""
    echo "âœ¨ Code has been formatted!"
    echo "ğŸ“ Adding formatted files to commit..."
    
    # Add all Solidity files that were formatted
    git add *.sol **/*.sol 2>/dev/null || true
    
    echo "âœ… Formatted files added to commit"
else
    echo "âœ… No formatting changes needed"
fi

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
